#+TITLE: PoprC Notes

* jump to alt on failed assert
** label _before_ reduction on assert
** need labels in bytecode
*** label is just forward alt pointer
**** only stored on assert
*** support forward alts in bytecode
**** split exec on alt blocks
**** store PC somewhere, though, maybe tmp for now?
* simple etif (else/then/if)
:c etif ! swap | cut
* things that must not escape functions
- for efficiency and simplicity
** thunks
** alts? (cut before return)
* indentation
line with ':' establishes body indent
next line sets head indent if greater
section precedence: module > word

module first: _start of head_ head
  module inside_first_head: blah
    blah
  blah
  _end of head_
_start of body_
f1: blah
  blah
  blah
f2: blah
module next: ...

sub-modules and imports must be in module head, functions in body
* indentation 2
- one definition
name: blah
        blah blah
        blah
- multiple definitions
_type1_
name:
  blah blah
    blah __ first
  yak yak
    yak  __ second
mod:
  module a
  module b
mod.f1: c.f1
_type2_
mod2: module a, module b
mod2.f1: c.f1
_type3_
mod3: module a
mod3: module b
mod3.f1: c.f1
- also works for words
- type1 may be confusing
